# ë³´í—˜ ê³„ì•½ ìœ ì§€ ê´€ë¦¬ ì‹œìŠ¤í…œ (Insurance Contract Maintenance System)

ì‹¤ë¬´ ìƒëª…ë³´í—˜ì‚¬ ê³„ì•½ ìœ ì§€ ì‹œìŠ¤í…œì˜ ë„ë©”ì¸ ì§€ì‹ì„ ë°”íƒ•ìœ¼ë¡œ, Spring Bootì™€ JPAë¥¼ í™œìš©í•˜ì—¬ êµ¬ì¶•í•˜ëŠ” ë°±ì—”ë“œ í† ì´ í”„ë¡œì íŠ¸ì…ë‹ˆë‹¤.

## ğŸ“Œ í”„ë¡œì íŠ¸ ëª©í‘œ

-   ë³µì¡í•œ ë³´í—˜ ë„ë©”ì¸(ê³ ê°, ê³„ì•½, íŠ¹ì•½, ë‚©ì…, ì‹¤íš¨/í•´ì§€)ì„ ê°ì²´ì§€í–¥ì ìœ¼ë¡œ ëª¨ë¸ë§í•˜ê³  JPA ì—”í‹°í‹°ë¡œ ì„¤ê³„í•˜ëŠ” ëŠ¥ë ¥ ë°°ì–‘
-   ê³„ì¸µí˜• ì•„í‚¤í…ì²˜(Controller, Service, Repository, Domain) ê¸°ë°˜ìœ¼ë¡œ ê° ê³„ì¸µì˜ ì—­í• ê³¼ ì±…ì„ì„ ëª…í™•íˆ ë¶„ë¦¬í•˜ì—¬ ì„¤ê³„í•˜ëŠ” ì‹¤ë¬´ ê²½í—˜ ìŠµë“
-   ì‹¤ì‹œê°„ API ì²˜ë¦¬(PART 1)ì™€ ëŒ€ìš©ëŸ‰ ë°ì´í„° ì²˜ë¦¬(PART 2)ë¥¼ ëª¨ë‘ êµ¬í˜„í•˜ì—¬ ê²¬ê³ í•œ ë°±ì—”ë“œ ì‹œìŠ¤í…œ êµ¬ì¶•
-   'ì‚´ì•„ìˆëŠ”' ë„ë©”ì¸ ëª¨ë¸ê³¼ í…ŒìŠ¤íŠ¸ ì½”ë“œì˜ ì¤‘ìš”ì„±ì„ ì´í•´í•˜ê³ , ìœ ì§€ë³´ìˆ˜ì„±ê³¼ í™•ì¥ì„±ì´ ë†’ì€ ì½”ë“œë¥¼ ì‘ì„±í•˜ëŠ” í›ˆë ¨

## ğŸš€ ê¸°ìˆ  ìŠ¤íƒ (Tech Stack)

| êµ¬ë¶„ | ê¸°ìˆ  |
| :--- | :--- |
| **Backend** | `Java 17`, `Spring Boot 3.x`, `Spring Data JPA`, `Spring Batch` |
| **Database** | `H2 Database` (TCP Mode) |
| **Build Tool** | `Gradle` |
| **Utilities** | `Lombok`, `Spring Boot DevTools` |
| **Test** | `JUnit5` |

## ğŸ›ï¸ ì•„í‚¤í…ì²˜ ë° ì„¤ê³„ ì›ì¹™

ë³¸ í”„ë¡œì íŠ¸ëŠ” ì•„ë˜ 5ê°€ì§€ **ì„¤ê³„ í—Œë²•**ì„ ì² ì €íˆ ì¤€ìˆ˜í•˜ì—¬ ê°œë°œë©ë‹ˆë‹¤.

#### 1. í•µì‹¬ ì»´í¬ë„ŒíŠ¸ ê´€ê³„ë„ (ì—­í•  ì¤‘ì‹¬)

```mermaid
graph TD
    A["Controller"] -- "í˜¸ì¶œ" --> B["Service"]
    B -- "í˜¸ì¶œ" --> E["Repository"]
    B -- "ë¡œì§ ìœ„ì„" --> D["Domain (Entity)"]
    E -- "ë°ì´í„° CRUD" --> G["Database"]
    H["Spring Scheduler"] -- "íŠ¸ë¦¬ê±°" --> F["Batch Job"]
    F -- "Read/Write" --> E
```

#### 2. ì„¤ê³„ í—Œë²• 5ê°œ ì¡°í•­
1.  **ë„ë©”ì¸ ëª¨ë¸ íŒ¨í„´:** ì—”í‹°í‹°(`@Entity`)ëŠ” ë°ì´í„°ì™€ í•µì‹¬ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§(í–‰ìœ„)ì„ í•¨ê»˜ ê°€ì§€ëŠ” 'ì‚´ì•„ìˆëŠ” ì „ë¬¸ê°€' ê°ì²´ì—¬ì•¼ í•©ë‹ˆë‹¤.
2.  **ì •ì  íŒ©í† ë¦¬ ë©”ì†Œë“œ:** ì—”í‹°í‹° ìƒì„±ì˜ ì±…ì„ê³¼ ì ˆì°¨ëŠ” ì—”í‹°í‹° ìì‹ ì´ `create...()`ì™€ ê°™ì€ í‘œì¤€í™”ëœ ë©”ì†Œë“œë¥¼ í†µí•´ ìˆ˜í–‰í•©ë‹ˆë‹¤.
3.  **ì—°ê´€ê´€ê³„ ì›ì¹™:** ê´€ê³„ì˜ ì£¼ì¸ì€ Nìª½ì´ë©°, ì–‘ë°©í–¥ ê´€ê³„ëŠ” ê¼­ í•„ìš”í•  ë•Œë§Œ ì—°ê´€ê´€ê³„ í¸ì˜ ë©”ì†Œë“œì™€ í•¨ê»˜ ì„¤ì •í•©ë‹ˆë‹¤.
4.  **ì§€ì—° ë¡œë”© ìš°ì„ :** ëª¨ë“  ì—°ê´€ê´€ê³„ëŠ” `FetchType.LAZY`ë¥¼ ê¸°ë³¸ìœ¼ë¡œ í•˜ì—¬ ì„±ëŠ¥ì„ í™•ë³´í•©ë‹ˆë‹¤.
5.  **í…ŒìŠ¤íŠ¸ ì½”ë“œ í•„ìˆ˜:** ëª¨ë“  ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì€ í…ŒìŠ¤íŠ¸ ì½”ë“œë¡œ ê²€ì¦í•©ë‹ˆë‹¤.

## ğŸ“ ê¸°ëŠ¥ ëª…ì„¸ì„œ

### PART 1. ì‚¬ìš©ì/ìƒë‹´ì›ìš© ì›¹ í™”ë©´ ê¸°ëŠ¥ (API)

-   **[F-01] ê³ ê° ëª©ë¡ ì¡°íšŒ & ê²€ìƒ‰**
-   **[F-02] ê³ ê° ìƒì„¸ ì¡°íšŒ** (ë³´ìœ  ê³„ì•½ ëª©ë¡ í¬í•¨)
-   **[F-03] ê³„ì•½ ëª©ë¡ ì¡°íšŒ & ê²€ìƒ‰**
-   **[F-04] ê³„ì•½ ìƒì„¸ í†µí•© ì¡°íšŒ** (íŠ¹ì•½, ë‚©ì…, ì‹¤íš¨/í•´ì§€ ì •ë³´ í¬í•¨)

#### API ì—”ë“œí¬ì¸íŠ¸ ë§µ

| **HTTP Method** | **URL** | **ë‹´ë‹¹ Controller** | **ì„¤ëª…** |
| :--- | :--- | :--- | :--- |
| `GET` | `/api/customers` | `CustomerController` | ì „ì²´ ê³ ê° ëª©ë¡ì„ ì¡°íšŒ |
| `GET` | `/api/customers/{id}` | `CustomerController` | íŠ¹ì • ê³ ê°ì˜ ìƒì„¸ ì •ë³´ì™€ ê³„ì•½ ëª©ë¡ì„ ì¡°íšŒ |
| `GET` | `/api/contracts` | `ContractController` | ì „ì²´ ê³„ì•½ ëª©ë¡ì„ ì¡°íšŒ |
| `GET` | `/api/contracts/{id}` | `ContractController` | íŠ¹ì • ê³„ì•½ì˜ ìƒì„¸ ì •ë³´ë¥¼ í†µí•© ì¡°íšŒ |

### PART 2. ì‹œìŠ¤í…œ/ê´€ë¦¬ììš© ë°±ê·¸ë¼ìš´ë“œ ê¸°ëŠ¥ (Batch)

-   **[B-01] (ë°°ì¹˜)** ì •ìƒ ë‚©ì… ì²˜ë¦¬
-   **[B-02] (ë°°ì¹˜)** ì‹¤íš¨ ì˜ˆê³  ë° ìµœì¢… ì‹¤íš¨ ì²˜ë¦¬
-   **[B-03] (ë°°ì¹˜)** í•´ì§€ ì•ˆë‚´ í†µì§€
-   **[B-04] (ë°°ì¹˜)** ìë™ í•´ì§€ ì²˜ë¦¬

## ğŸ“ í”„ë¡œì íŠ¸ êµ¬ì¡° (Folder Structure)

```text
com.insurance.maintenance
â”œâ”€â”€ ğŸ“ controller/         # API Endpoints
â”‚   â”œâ”€â”€ ğŸ“„ CustomerController.java
â”‚   â””â”€â”€ ğŸ“„ ContractController.java
â”œâ”€â”€ ğŸ“ service/             # Business Logic Orchestration
â”‚   â”œâ”€â”€ ğŸ“„ CustomerService.java
â”‚   â””â”€â”€ ğŸ“„ ContractService.java
â”œâ”€â”€ ğŸ“ repository/          # Data Access Layer
â”‚   â”œâ”€â”€ ğŸ“„ CustomerRepository.java
â”‚   â””â”€â”€ ğŸ“„ ContractRepository.java
â”œâ”€â”€ ğŸ“ domain/              # Core Business Entities & Logic
â”‚   â”œâ”€â”€ ğŸ“„ Customer.java
â”‚   â”œâ”€â”€ ğŸ“„ Contract.java
â”‚   â”œâ”€â”€ ğŸ“„ Rider.java
â”‚   â”œâ”€â”€ ğŸ“„ Payment.java
â”‚   â””â”€â”€ ... (LapseDetail, etc.)
â”œâ”€â”€ ğŸ“ dto/                 # Data Transfer Objects
â”‚   â””â”€â”€ ğŸ“ response/
â”‚       â”œâ”€â”€ ğŸ“„ CustomerResponseDto.java
â”‚       â””â”€â”€ ğŸ“„ ContractResponseDto.java
â””â”€â”€ ğŸ“ batch/               # Spring Batch Job Configurations
    â””â”€â”€ ğŸ“„ LapseContractJobConfig.java
```

## âš™ï¸ ì‹¤í–‰ ë°©ë²•

1.  **JDK 17** ë° **Gradle** ì„¤ì¹˜
2.  í”„ë¡œì íŠ¸ í´ë¡ 
    ```bash
    git clone [ì €ì¥ì†Œ URL]
    ```
3.  í”„ë¡œì íŠ¸ ë¹Œë“œ
    ```bash
    ./gradlew build
    ```
4.  ì• í”Œë¦¬ì¼€ì´ì…˜ ì‹¤í–‰
    ```bash
    java -jar build/libs/maintenance-0.0.1-SNAPSHOT.jar
    ```
5.  H2 ë°ì´í„°ë² ì´ìŠ¤ ì½˜ì†” ì ‘ì†
    -   ë¸Œë¼ìš°ì €ì—ì„œ `http://localhost:8080/h2-console` ë¡œ ì ‘ì†
    -   JDBC URL: `jdbc:h2:tcp://localhost/~/maintenance` (yml ì„¤ì •ê³¼ ë™ì¼í•˜ê²Œ)
    -   ì‚¬ìš©ìëª…: `sa`
    -   ì—°ê²° í›„ í…Œì´ë¸” ìƒì„± ì—¬ë¶€ í™•ì¸
